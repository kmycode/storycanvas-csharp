<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>StoryCanvas: Obtain an App Identifier</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">StoryCanvas
   &#160;<span id="projectnumber">2.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 構築: Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'検索');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','検索');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Obtain an App Identifier </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Please see the <a href="http://support.hockeyapp.net/kb/about-general-faq/how-to-create-a-new-app">How to create a new app</a> tutorial. This will provide you with a HockeyApp specific App Identifier to be used to initialize the SDK.</p>
<h2>Add crash reporting</h2>
<p>This will add crash reporting capabilities to your app.</p>
<p>In your <code>MainActivity.cs</code> file, add the following lines:</p>
<div class="fragment"><div class="line">using HockeyApp.Android;</div><div class="line"></div><div class="line">namespace YourNameSpace</div><div class="line">{</div><div class="line">    [Activity(Label = &quot;Your.App&quot;, MainLauncher = true, Icon = &quot;@mipmap/icon&quot;)]</div><div class="line">    public class MainActivity : Activity </div><div class="line">    {</div><div class="line">        protected override void OnCreate(Bundle savedInstanceState) </div><div class="line">        {</div><div class="line">            base.OnCreate(savedInstanceState);</div><div class="line"></div><div class="line">            // ... your own OnCreate implementation</div><div class="line">            CrashManager.Register(this, &quot;Your-App-Id&quot;);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>When the app is resumed, the crash manager is triggered and checks if a new crash was created before. If a previous crash is detected, it presents a dialog to ask the user whether they want to send the crash log to HockeyApp. On app launch the crash manager registers a new exception handler to recognize app crashes.</p>
<h2>Add AppId to manifest</h2>
<p>Add the following assembly level attribute in <code>Properties/AssemblyInfo.cs</code></p>
<div class="fragment"><div class="line">[assembly: MetaData (&quot;net.hockeyapp.android.appIdentifier&quot;, Value=&quot;Your-Api-Key&quot;)]</div></div><!-- fragment --><p>This will allow you to set your AppId once and simplify register calls</p>
<div class="fragment"><div class="line">using HockeyApp.Android;</div><div class="line"></div><div class="line">namespace YourNameSpace</div><div class="line">{</div><div class="line">    [Activity(Label = &quot;Your.App&quot;, MainLauncher = true, Icon = &quot;@mipmap/icon&quot;)]</div><div class="line">    public class MainActivity : Activity </div><div class="line">    {</div><div class="line">        protected override void OnCreate(Bundle savedInstanceState) </div><div class="line">        {</div><div class="line">            base.OnCreate(savedInstanceState);</div><div class="line"></div><div class="line">            // ... your own OnCreate implementation</div><div class="line">            CrashManager.Register(this);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h2>Add User Metrics</h2>
<p>HockeyApp automatically provides you with nice, intelligible, and informative metrics about how your app is used and by whom.</p>
<ul>
<li><b>Sessions</b>: A new session is tracked by the SDK whenever the containing app is restarted (this refers to a 'cold start', i.e. when the app has not already been in memory prior to being launched) or whenever it becomes active again after having been in the background for 20 seconds or more.</li>
<li><b>Users</b>: The SDK anonymously tracks the users of your app by creating a random UUID.</li>
</ul>
<p>On Android, User Metrics is not automatically gathered, you have to start this manually:</p>
<div class="fragment"><div class="line">// add the HockeyApp namespace</div><div class="line">using HockeyApp.Android.Metrics;</div><div class="line"></div><div class="line">// in your main activity OnCreate-method add:</div><div class="line">MetricsManager.Register(this, Application, &quot;$Your_App_Id&quot;);</div></div><!-- fragment --><h2>Add Custom Events</h2>
<p>HockeyApp allows you to track custom events to understand user actions inside your app.</p>
<p><b>Please note:</b> To use custom events, please first make sure that User Metrics is set up correctly, e.g. you registered the MetricsManager.</p>
<ol type="1">
<li>Make sure to add the correct namespace: <div class="fragment"><div class="line">using HockeyApp;</div><div class="line">using System.Collections.Generic;</div></div><!-- fragment --></li>
<li>Track custom events like this: <div class="fragment"><div class="line">HockeyApp.MetricsManager.TrackEvent(&quot;Custom Event&quot;);</div></div><!-- fragment --> if you want to add custom properties or measurements, use this:</li>
</ol>
<div class="fragment"><div class="line">HockeyApp.MetricsManager.TrackEvent(</div><div class="line">  &quot;Custom Event&quot;,</div><div class="line">  new Dictionary&lt;string, string&gt; { { &quot;property&quot;, &quot;value&quot; } },</div><div class="line">  new Dictionary&lt;string, double&gt; { { &quot;time&quot;, 1.0 } }</div><div class="line">)</div></div><!-- fragment --><h2>Add Update Distribution</h2>
<p>This will add the in-app update mechanism to your app.</p>
<p>Open the activity where you want to inform the user about eventual updates. We'll assume you want to do this on startup of your main activity.</p>
<p>Add the following lines and make sure to always balance <code>Register(...)</code> calls to SDK managers with <code>Unregister()</code> calls in the corresponding lifecycle callbacks:</p>
<div class="fragment"><div class="line">using HockeyApp.Android;</div><div class="line"></div><div class="line">namespace YourNameSpace </div><div class="line">{</div><div class="line">    [Activity(Label = &quot;Your.App&quot;, MainLauncher = true, Icon = &quot;@mipmap/icon&quot;)]</div><div class="line">    public class YourActivity : Activity </div><div class="line">    {</div><div class="line">        protected override void OnCreate(Bundle savedInstanceState) </div><div class="line">        {</div><div class="line">            base.OnCreate(savedInstanceState);</div><div class="line"></div><div class="line">            // Your own code to create the view</div><div class="line">            // ...</div><div class="line"></div><div class="line">            CheckForUpdates();</div><div class="line">        }</div><div class="line"></div><div class="line">        void CheckForUpdates()</div><div class="line">        {</div><div class="line">            // Remove this for store builds!</div><div class="line">            UpdateManager.Register(this, &quot;Your_App_Id&quot;);</div><div class="line">        }</div><div class="line"></div><div class="line">        void UnregisterManagers() </div><div class="line">        {</div><div class="line">            UpdateManager.Unregister();</div><div class="line">        }</div><div class="line"></div><div class="line">        protected override void OnPause() </div><div class="line">        {</div><div class="line">            base.OnPause();</div><div class="line"></div><div class="line">            UnregisterManagers();</div><div class="line">        }</div><div class="line"></div><div class="line">        protected override void OnDestroy()</div><div class="line">        {</div><div class="line">            base.OnDestroy();</div><div class="line"></div><div class="line">            UnregisterManagers();</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>When the activity is created, the update manager checks for new updates in the background. If it finds a new update, an alert dialog is shown and if the user presses Show, they will be taken to the update activity. The reason to only do this once upon creation is that the update check causes network traffic and therefore potential costs for your users.</p>
<h2>Add in-app feedback</h2>
<p>This will add the ability for your users to provide feedback from right inside your app.</p>
<p>You'll typically only want to show the feedback interface upon user interaction, for this example we assume you have a button <code>feedback_button</code> in your view for this.</p>
<p>Add the following lines to your respective activity, handling the touch events and showing the feedback interface:</p>
<div class="fragment"><div class="line">using HockeyApp.Android;</div><div class="line"></div><div class="line">namespace YourNameSpace</div><div class="line">{</div><div class="line">    public class YourActivity : Activitiy</div><div class="line">    {</div><div class="line">        protected override void OnCreate(Bundle savedInstanceState)</div><div class="line">        {</div><div class="line">            base.OnCreate(savedInstanceState);</div><div class="line">            // Your own code to create the view</div><div class="line">            // ...</div><div class="line"></div><div class="line">            FeedbackManager.Register(this, &quot;Your-App-Id&quot;);</div><div class="line"></div><div class="line">            var feedbackButton = FindViewById&lt;Button&gt;(Resource.Id.feedback_button);</div><div class="line"></div><div class="line">            feedbackButton.Click += delegate {</div><div class="line">                FeedbackManager.ShowFeedbackActivity(ApplicationContext);</div><div class="line">            });</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>When the user taps on the feedback button it will launch the feedback interface of the HockeySDK, where the user can create a new feedback discussion, add screenshots or other files for reference, and act on their previous feedback conversations.</p>
<h2>Add authentication</h2>
<p>You can force authentication of your users through the <code>LoginManager</code> class. This will show a login screen to users if they are not fully authenticated to protect your app.</p>
<p>Retrieve your app secret from the HockeyApp backend. You can find this on the app details page in the backend right next to the <em><b>App ID</b></em> value. Click <em><b>Show</b></em> to access it.</p>
<p>Open the activity you want to protect, if you want to protect all of your app this will be your main activity.</p>
<p>Add the following lines to this activity: using HockeyApp.Android;</p>
<div class="fragment"><div class="line">namespace YourNameSpace</div><div class="line">{</div><div class="line">    [Activity(Label = &quot;Your.App&quot;, MainLauncher = true, Icon = &quot;@mipmap/icon&quot;)]</div><div class="line">    public class YourActivity : Activity</div><div class="line">    {</div><div class="line">        protected override void OnCreate(Bundle savedInstanceState)</div><div class="line">        {</div><div class="line">            base.OnCreate(savedInstanceState);</div><div class="line">            // Your own code to create the view</div><div class="line">            // ...</div><div class="line"></div><div class="line">            LoginManager.Register(this, APP_SECRET,                 LoginManager.LOGIN_MODE_EMAIL_PASSWORD);</div><div class="line">                LoginManager.VerifyLogin(this, Intent);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>Make sure to replace <em><b>APP_SECRET</b></em> with the value retrieved in the first step. This will launch the login activity every time a user launches your app.</p>
<h3>Permissions</h3>
<p>Permissions get automatically merged into your manifest. If your app does not use update distribution you might consider removing the <em><b>Write External Storage</b></em> permission.</p>
<h3>Control output to LogCat</h3>
<p>You can control the amount of log messages from HockeySDK that show up in LogCat. By default, we keep the noise as low as possible, only errors will show up. To enable additional logging, i.e. while debugging, add the following line of code:</p>
<div class="fragment"><div class="line">HockeyLog.LogLevel(3);</div></div><!-- fragment --><p>The different log levels match Android's own log levels.</p>
<div class="fragment"><div class="line">HockeyLog.LogLevel(2); // Verbose, show all log statements</div><div class="line">HockeyLog.LogLevel(3); // Debug, show most log statements – useful for debugging</div><div class="line">HockeyLog.LogLevel(4); // Info, show informative or higher log messages</div><div class="line">HockeyLog.LogLevel(5); // Warn, show warnings and errors</div><div class="line">HockeyLog.LogLevel(6); // Error, show only errors – the default log level</div></div><!-- fragment --><h2>More Information</h2>
<p>For more information, see the <a href="https://github.com/bitstadium/HockeySDK-Xamarin">HockeySDK for Xamarin Source Repository</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
構築: &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
